AWS Key Management Service (KMS)
---

- lets organizations `create, manage, and control cryptographic keys` used to protect data records.
- integrates with AWS services that can encrypt data records
- When you enable encryption services using AWS KMS, a `CMK is automatically generated` in your AWS account `for data encryption and decryption` services.
- Organizations can choose to create `one or more CMKs` and use them to match their security requirements.
- A `custom CMK allows you to control each key’s access control and usage policy`; you can also grant permissions to other AWS accounts and services to use a specific custom CMK.
- You can also choose to create symmetric or  CMKs asymmetric.
- You can create up to 10,000 CMKs per AWS account per AWS region.

# Envelope Encryption

- Used to `encrypt data at rest`.
- involves two layers of encryption:
  - First layer encrypts the data using a key generated by the organization
  - Second layer encrypts the customer-generated key using a key that is managed by the AWS Key Management Service (KMS).
- This process enables each organization to retain control over their encryption keys and also enables them to rotate and manage the keys as needed, while still benefitting from the security and reliability of using the KMS for encryption key management.
- When you need to encrypt data, KMS generates a data key that is used to encrypt the data locally within the AWS service or application. The data keys are also encrypted under the organization’s CMK.
- When it’s time to decrypt your data, a request is sent to KMS to decrypt the data key (that is, the data key copy that was stored with the encrypted data) using your CMK.
- The entire encryption or decryption process is logged in AWS CloudTrail for auditing purposes.

# AWS KMS Security Features

## Key management

- As an administrator, you can `create, rotate, disable, and delete the CMKs` that are used to encrypt your data.
- You can also view the key policy for a CMK, which specifies who has access to the CMK and what actions they can perform with it.

## Access control

- Organizations can use AWS IAM policies to control who has access to their CMKs and what actions can be performed with them.
- Users can be granted the ability to encrypt data using a specific CMK, but not to decrypt it or change the key policy.

## Auditing

- AWS KMS `logs all API calls to AWS CloudTrail` so organizations can track who is using each CMK and for what purpose.
- Auditing can help ensure that encryption keys are being used securely and in accordance with an organization’s security policies.

## Key material

- KMS stores the key material for your CMKs in secure hardware devices called `hardware security modules (HSMs)`.
- This helps protect the security of each organization’s keys and ensures that they are only accessible to authorized users.

## Key rotation

- CMKS can be configured to `automatically be rotated on an annual basis`, to help prevent security breaches.

<h2 style="background-color:lightgreen"># AWS KMS Cheat Sheet</h2>.

- AWS KMS can be used to create symmetric keys within a custom key store such as AWS CloudHSM.
- An organization’s symmetric keys can be imported for use with AWS KMS.
- AWS KMS can create symmetric and asymmetric data key pairs for application use.
- CMKs can be automatically rotated annually.
- CMKs can be disabled and re-enabled.
- AWS KMS keys can be audited with AWS CloudTrail.