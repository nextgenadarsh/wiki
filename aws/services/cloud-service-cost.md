Cloud Service Costs
---

Using a managed AWS cloud service for storage, database deployments, or monitoring removes the cost of managing, maintaining, updating, and administering a customer-built service. For example, when storing objects in S3 buckets, customers create buckets and manage their stored objects, but they don’t have to maintain and update the S3 storage array. Overall, costs are reduced when you use AWS cloud services as part of your workload.

How AWS charges for cloud services that are used can be broken down by component, as shown in Table 12-2. This breakdown of costs is the same in every AWS region.

# Cloud Service Charges at AWS

Service | Charges | Components  | Examples
--  | --  | --  | --
Management tools  | Number of times service performs selected tasks; tiered pricing after the minimum is reached  | Compute, storage, notification, and automation charges  | AWS Config, AWS Lambda, AWS CloudWatch, Amazon GuardDuty, Amazon Macie
Compute | By the hour or second | Compute hours plus data transfer charges  | EC2 instance, ECS, RDS
Storage | Monthly per gigabyte stored; tiered pricing after the minimum is reached  | Storage, data transfer, and, optionally, encryption or notification and automation charges  | Amazon EBS, S3 Glacier, EFS, FSx, EBS snapshots, server logs
Amazon CloudWatch | By alarm, metrics, and analysis; tiered pricing after minimum is reached  | Compute, storage, notification, and automation charges  | Alerts/Alarms, CloudWatch logs, Events/Rules
Amazon SNS  | Per notification; tiered pricing after minimum quota is reached | Compute, storage, notification, and automation charges  | Notifications
Data transfer | Per gigabyte transferred  | Data transfer out | Across AZs, regions, edge locations outgoing data

# Tiered Pricing at AWS

Many AWS management services and data transfer costs offer tiered pricing. With tiered pricing, a customer uses a particular AWS service until their usage of the service exceeds a defined default value; then, the customer’s costs scale based on a sliding price point. The more usage, the smaller the charges. After usage increases to the next tiered level, AWS provides another price break until the next checkpoint. For example, charges for data transfer out from EC2 instances to the Internet start at $0.09/gigabyte until you reach 10 TiB. Then, additional discounts apply, as shown in Table 12-3. The charge for region-to-region traffic is currently set at $0.02/gigabyte, but in the case of us-east-1 and us-east-2, it’s $0.01/gigabyte. The prices presented here may change by the time you read this, because AWS changes prices from time to time.

A typical web application hosted at AWS will also most likely be using the following services. Each service has specific charges based on its operation.

- Amazon CloudFront: The first 1 TiB of data transfer, the first 10 million HTTP/S requests, and the first 2 million CloudFront Functions invocations are free.
- Amazon CloudWatch: Up to the first 10,000 custom metrics are charged $0.30 per month. The next 240,000 metrics are charged at $0.10 per month.
AWS CloudTrail: The first copy of management events stored in S3 is free, then $2.00 per 100,000 management events delivered.
EC2 instance traffic: EC2 traffic between different AZs hosted within the region costs the same as region-to-region data transfer. ELB to EC2 traffic is free of charge within the AZ.
ELB: ELB charges are calculated by Load Balancer Capacity Units (LCUs) for Application Load Balancer and Network Load Balancer. The regional location of your load balancer is also considered when calculating the LCU price. The LCU measures the dimensions of your traffic, which include new connections, active connections, the amount of bandwidth, and the number of rules processed by the load balancer. Whichever LCU dimension is highest per ALB/NLB-hour (or partial hour) is the one charged.
Amazon S3 Standard: First 50 TiB/month $0.023 per GiB; next 450 TiB/month $0.022 per GiB.

# AWS Cost Explorer

Cost Explorer helps customers analyze AWS account costs and overall usage with free reports. Default reports include a breakdown of the AWS services that are incurring the most costs, including overall EC2 usage and Reserved Instance utilization. Optionally, an organization can carry out a deep-dive cost analysis, filtering with numerous dimensions; for example, by AWS service and region. AWS accounts that are members of an AWS Organization can take advantage of consolidated billing and review the charges generated by all member accounts. Using Cost Explorer (see Figure 12-4), you can filter AWS costs based on the following:

- API operation: Requests and tasks performed by each AWS service
- Availability zone: Charges per availability zone
All costs: Costs per AWS account
Linked accounts: Member accounts in an AWS organization
AWS region: Where operations and AWS services operated
AWS service: AWS services used
Tags: Cost allocation tags assigned to the selected service
Tenancy: Multi- or single-tenancy EC2 instances
Usage type: Amounts of AWS service data (compute hours, data transfer in or out, CloudWatch metrics, I/O requests, and data storage)

To enable tracking of your costs with Cost Explorer, you need to sign in to the AWS Management Console and enable data collection by opening the Billing Dashboard and Cost Management and launching the Cost Explorer. After the initialization of Cost Explorer, costs are displayed for the current month and will be forecast for the next 12 months; updates will be made to the current spend every 24 hours. Cost Explorer can also display historical cost data, costs for the current month, and trends and forecasts. The following are the default Cost Explorer reports:

- AWS Marketplace: Costs for the products you’ve ordered through AWS Marketplace.
- Daily Costs: How much you spent over the past 6 months and projected costs over the next month.
Monthly Costs by Linked Account: Costs for linked accounts in an AWS organization.
Monthly Costs by Service: Costs over the past 6 months highlighted by the top five services’ costs.
Monthly EC2 Running Hours Costs and Usage: The amount spent on active reserved instances (RIs).
Reserved Instance Utilization Report: Reserved instances used, including any overspending and net savings from using reserved instances.
Reserved Instance Coverage Report: Details on how many EC2 instance hours have been covered by reserved instances, how much was spent on the on-demand instance, and how much could be saved by purchasing reserved instances. Compute services that can use EC2 reserved instances include Amazon Redshift, Amazon RDS, Elasticsearch clusters, and Amazon ElastiCache. Filters include the specific AZ, EC2 instance type, linked AWS account, operating system platform, AWS region, and compute tenancy. In addition, detailed information for each reservation can be downloaded as a CSV file.
Rightsizing Recommendations: Cost Explorer recommendations for improving the use of reserved instances and AWS resources (see Figure 12-5).

# AWS Budgets

AWS Budgets tracks AWS costs and can use billing alerts (refer to Figure 12-7) to alert organizations when costs are outside defined budget guidelines. Budget information is updated every 8 hours. Budgets can also be created to monitor the overall utilization and coverage of your existing reserved instances or savings plans. Alert notifications can be sent to an Amazon SNS topic and up to ten email addresses.

The following types of budgets can be created using Budgets (see Figure 12-8):

Cost budgets: Define how much to spend on a particular AWS service (for example, EC2 instances).
Usage budgets: Define how much to spend on one or more AWS services.
RI utilization budgets: Define the expected usage level of purchased Reserved Instances and get alerted if RI usage falls below the defined usage threshold.
RI coverage budgets: Define the expected coverage level of purchased Reserved Instances and get alerted if RI coverage of EC2 instances falls below the defined threshold number of hours.
Savings Plans utilization budgets: Define the expected usage level of EC2 instances, Fargate, and AWS Lambda functions and get alerted when your savings plan falls below the defined threshold.
Savings Plans coverage budgets: Define the expected coverage level of EC2 instances, Fargate, and AWS Lambda functions and get alerted when your savings plan falls below the defined threshold.

You can also create custom budgets with predefined templates such as:

Define a zero spend budget that notifies you when spending exceeds the AWS Free Tier limits.
Define a budget with monthly costs, with fixed targets tracking all costs associated with an AWS account. Alerts could be defined for both actual and forecasted spending.
Define a budget with escalating monthly spending costs, with notifications alerting when funds are spent in excess of the allowable increases.
Define a budget with a fixed usage amount, with notifications alerting when the budget spend is close to being exceeded.

Note

Budget notifications use Amazon SNS to send alerts. Alerts are sent to defined SNS topics, and automated actions can be performed using AWS Lambda functions. Notifications can also alert via email or text message.

# AWS Cost and Usage Reports

Cost and Usage Reports (CUR) provide a comprehensive overview of the monthly costs and usage of AWS services per AWS account or AWS organization (see Figure 12-9), showing hourly, daily, or monthly expenses based on products and resources used or based on resource tags that have already been defined. From the Billing Dashboard and Cost Management, select Cost and Usage Reports, and click Create Report. Resource IDs can be used to create individual line items for each AWS resource used. An Amazon S3 bucket must be chosen as the location for storing requested reports.

Reports can also be viewed directly from the Cost and Usage Reports console; a CSV usage report can also be downloaded. Optionally, you can use Amazon Athena with standard SQL queries, or load CUR data to an Amazon Redshift deployment, or use Amazon QuickSight for additional analysis.

# Managing Costs Cheat Sheet

Track your costs and usage against defined budgets by using AWS Budgets.
Use AWS Cost Explorer to review current costs and usage by creating a Cost and Usage Report.
Create tags for your AWS resources and then activate the tags to add information to a Cost and Usage Report.
Use AWS Cost Explorer to perform forecasting for your costs and overall usage for the upcoming month or year.
Use AWS Organizations to take advantage of consolidated Billing Dashboard, with one bill for multiple accounts.
Combine resource usage across all AWS accounts contained in an AWS organization, resulting in the sharing of volume pricing discounts.
Use AWS Budgets to define a monthly budget for your AWS costs and usage and discounts for savings plans or reserved instances.
Use AWS Config to review the inventory of your AWS resources and configuration within your AWS account or across your AWS organization.
Use AWS Systems Manager to get a detailed inventory of your EC2 assets.
Use tag policies in AWS Organizations defining rules for how tags must be used on AWS resources across your AWS accounts in the organization.

# Tagging AWS Resources

One essential task to consider is the creation of tags when you create AWS resources. Each tag is a key/value pair, and 50 individual tags can typically be created for each AWS resource. Tags can be used for automation, analysis, reporting, compliance checks, and with the Billing Dashboard. Custom tags can be used for many reasons, including the following examples:

- Tags on creation: Tags can be created for EBS volumes at the time of creation.
- Cost allocation tags: These tags allow you to have visibility into your actual snapshot storage costs. In the Billing Dashboard and Cost Management, you can select Cost Allocation Tags and then select and activate tags that can be used for the Billing Dashboard process (see Figure 12-10).
Enforced tags: AWS IAM security policies can enforce the use of specific tags on EBS volumes and control who can create tags.

# Using Cost Allocation Tags

Cost allocation tags can be created and deployed to track your AWS costs via cost allocation reports, which make it easier for you to track and categorize your existing AWS costs. There are two types of cost allocation tags: AWS-generated tags and user-defined tags. Each tag contains a key and a linked value. For example, user-defined tags might be Mark=Developer and Costs (see Figure 12-11). An example of an AWS-generated tag is the createdBy tag, which tracks who created the resource. The name of user-generated tags could include Cost Management and Stack.

AWS has defined the createdBy tag for use with selected AWS resources for cost allocation tracking. AWS-generated tags must be activated in the Billing Dashboard and Cost Management before they can be used. The createdBy tag is supported by the following AWS services: AWS CloudFormation, Amazon Redshift, Amazon Route 53, Amazon S3 storage, AWS Storage Gateway, and Amazon EC2 instances and networking components, including VPCs, security groups, snapshots, subnets, and Internet gateways.

As mentioned, once tags have been created and applied to an AWS resource, you can activate the tags in the Billing Dashboard and Cost Management, which then generates a cost allocation report in a CSV file that has your usage and costs grouped by the assigned active tags. AWS Cost Explorer and AWS Cost and Usage Reports can break down AWS costs by tags.

Note

Tag policies can be created to standardize tags across AWS Organizations, allowing customers to label resources using key/value pairs. Tag policies help Cost Explorer to identify resources by dimensions such as owner, cost center, or environment, helping identify and break out the cost of AWS.

